function handleQueryResponse(e){if(e.isError()){console.error("Error in query: "+e.getMessage()+" "+e.getDetailedMessage());return}for(var t=e.getDataTable(),n=document.getElementById("dataTable"),r=n.createTHead().insertRow(0),a=0;a<t.getNumberOfColumns();a++){var l=document.createElement("th");l.textContent=t.getColumnLabel(a),r.appendChild(l)}for(var o=document.createElement("tbody"),a=0;a<t.getNumberOfRows();a++)for(var d=o.insertRow(a),i=0;i<t.getNumberOfColumns();i++)d.insertCell(i).textContent=t.getFormattedValue(a,i);n.appendChild(o),addArrowsToColumn3(n),addLinksToTable(n),updatePetrolPrice()}function addArrowsToColumn3(e){for(var t=1;t<e.rows.length;t++){var n=e.rows[t].cells[2],r=n.textContent.trim(),a=r.match(/(-?[\d,]+\.*\d*)/);if(a&&a.length>0){var l=parseFloat(a[0].replace(",","").trim()),o=document.createElement("span");o.classList.add("arrow"),isNaN(l)||(l>0?(o.textContent="▲",o.style.color="red"):l<0?(o.textContent="▼",o.style.color="green"):(o.textContent="◼",o.style.fontWeight="bold"));var d=document.createElement("span");d.textContent=a[0];var i=document.createElement("span");i.textContent=r.replace(a[0],""),n.innerHTML="",n.appendChild(i),n.appendChild(d),n.appendChild(document.createTextNode(" ")),n.appendChild(o)}}}function goToStateURL(){var e=document.getElementById("stateSelect"),t=e.options[e.selectedIndex];t.value;var n=t.getAttribute("data-url");""!==n&&(window.location.href=n)}function goToCityURL(){var e=document.getElementById("citySelect"),t=e.options[e.selectedIndex];t.value;var n=t.getAttribute("data-url");""!==n&&(window.location.href=n)}document.getElementById("stateSelect").addEventListener("change",updatePetrolPrice),document.getElementById("citySelect").addEventListener("change",updatePetrolPrice),document.querySelectorAll('input[type="radio"]').forEach(e=>{e.addEventListener("change",()=>{let t=e.nextElementSibling.querySelector("a");t&&t.click()})});